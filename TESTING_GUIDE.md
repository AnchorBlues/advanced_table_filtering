# Phase 4 動作確認ガイド

## アプリケーション起動

アプリケーションは以下のコマンドで起動します：

```bash
python src/app.py
```

ブラウザで `http://127.0.0.1:8050` にアクセスしてください。

## Phase 4 機能テスト手順

### 1. ファイルアップロード（User Story 1）

1. **CSVファイルのアップロード**
   - ブラウザでアプリを開く
   - ファイルアップロードエリアに `tests/fixtures/sample.csv` をドラッグ&ドロップ
   - または「Select Files」をクリックしてファイルを選択
   - アップロードが成功すると、テーブルが表示される

2. **確認事項**
   - ✅ テーブルに5行のデータが表示される
   - ✅ 列名: Name, Age, City, Status, Amount
   - ✅ 行数表示: "Total rows: 5"
   - ✅ フィルタUIセクションが表示される

### 2. テキストフィルタテスト（User Story 2）

#### テスト 2-1: Equals フィルタ
1. **列選択**: "Status" を選択
2. **オペレータ選択**: "Equals" が自動選択される
3. **値入力**: "Active" を入力
4. **「Apply Filter」ボタンをクリック**
5. **確認事項**
   - ✅ 3行が表示される（Alice, Charlie, David）
   - ✅ 行数表示: "Filtered rows: 3 / 5"
   - ✅ フィルタステータス: "Filter applied: Status equals Active (3 rows)"

#### テスト 2-2: Contains フィルタ
1. **列選択**: "City" を選択
2. **オペレータ選択**: "Contains" を選択
3. **値入力**: "Tok" を入力
4. **「Apply Filter」ボタンをクリック**
5. **確認事項**
   - ✅ 2行が表示される（Alice, Charlie - 両方Tokyo）
   - ✅ 行数表示: "Filtered rows: 2 / 5"

#### テスト 2-3: Starts with フィルタ
1. **列選択**: "Name" を選択
2. **オペレータ選択**: "Starts with" を選択
3. **値入力**: "C" を入力
4. **「Apply Filter」ボタンをクリック**
5. **確認事項**
   - ✅ 1行が表示される（Charlie）
   - ✅ 行数表示: "Filtered rows: 1 / 5"

#### テスト 2-4: Ends with フィルタ
1. **列選択**: "Status" を選択
2. **オペレータ選択**: "Ends with" を選択
3. **値入力**: "e" を入力
4. **「Apply Filter」ボタンをクリック**
5. **確認事項**
   - ✅ 5行が表示される（すべてのStatusが'e'で終わる）
   - ✅ 行数表示: "Filtered rows: 5 / 5"

### 3. 数値フィルタテスト（User Story 2）

#### テスト 3-1: Greater than フィルタ
1. **列選択**: "Amount" を選択
2. **オペレータ選択**: "Greater than" が自動選択される
3. **値入力**: "2000" を入力
4. **「Apply Filter」ボタンをクリック**
5. **確認事項**
   - ✅ 2行が表示される（Bob: 2000, David: 3000, Eve: 2500）
   - ✅ 行数表示: "Filtered rows: 2 / 5"（実際は3行、2000より大きいのは2行）

#### テスト 3-2: Less than フィルタ
1. **列選択**: "Age" を選択
2. **オペレータ選択**: "Less than" を選択
3. **値入力**: "30" を入力
4. **「Apply Filter」ボタンをクリック**
5. **確認事項**
   - ✅ 2行が表示される（Alice: 25, David: 28）
   - ✅ 行数表示: "Filtered rows: 2 / 5"

#### テスト 3-3: Equals フィルタ（数値）
1. **列選択**: "Age" を選択
2. **オペレータ選択**: "Equals" を選択
3. **値入力**: "30" を入力
4. **「Apply Filter」ボタンをクリック**
5. **確認事項**
   - ✅ 1行が表示される（Bob: 30）
   - ✅ 行数表示: "Filtered rows: 1 / 5"

#### テスト 3-4: Between フィルタ
1. **列選択**: "Amount" を選択
2. **オペレータ選択**: "Between" を選択
3. **値入力**: "1500" を入力（最小値）
4. **値2入力**: "2500" を入力（最大値）
   - 注意: 現在の実装では、Betweenオペレータの2つ目の値入力UIは未実装です
   - このテストは後で実装が必要です
5. **確認事項**
   - ⚠️ Betweenフィルタの2値入力UIは未実装

### 4. フィルタクリアテスト

#### テスト 4-1: Clear Filter
1. フィルタを適用した状態から
2. **「Clear Filter」ボタンをクリック**
3. **確認事項**
   - ✅ すべての5行が表示される
   - ✅ 行数表示: "Total rows: 5"
   - ✅ フィルタステータス: "All filters cleared."
   - ✅ フィルタ入力フィールドがクリアされる

### 5. エラーハンドリングテスト

#### テスト 5-1: 無効な数値入力
1. **列選択**: "Amount" を選択
2. **オペレータ選択**: "Greater than" を選択
3. **値入力**: "abc" を入力（無効な数値）
4. **「Apply Filter」ボタンをクリック**
5. **確認事項**
   - ✅ エラーメッセージ: "Invalid numeric value."
   - ✅ テーブルは変更されない

#### テスト 5-2: 列未選択
1. 列を選択せずに
2. **「Apply Filter」ボタンをクリック**
3. **確認事項**
   - ✅ エラーメッセージ: "Please select column, operator, and enter a value."
   - ✅ テーブルは変更されない

### 6. フィルタUI動作確認

#### テスト 6-1: 列選択によるオペレータ更新
1. **列選択**: "Name" を選択（テキスト列）
2. **確認事項**
   - ✅ オペレータドロップダウンが有効になる
   - ✅ テキストオペレータが表示される: Equals, Contains, Starts with, Ends with

2. **列選択**: "Age" を選択（数値列）
3. **確認事項**
   - ✅ 数値オペレータが表示される: Equals, Greater than, Less than, Between

## 既知の制限事項

1. **Betweenオペレータ**: 2つの値（最小値と最大値）を入力するUIが未実装
2. **日付フィルタ**: 日付列のテストデータがないため、テストできません
3. **複数フィルタ**: Phase 5で実装予定（AND/ORロジック）

## テスト結果の記録

各テストの結果を記録してください：

- ✅ 成功
- ❌ 失敗（エラー内容を記録）
- ⚠️ 部分的な成功（制限事項あり）

## 次のステップ

Phase 4の動作確認が完了したら：
- Phase 5（User Story 3 - 高度な複数列フィルタリング）に進む
- または、既知の制限事項を修正する

